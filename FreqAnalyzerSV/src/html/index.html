<html lang="ko" onkeydown="keyboard.onkeydown(event)" style="display: none;">
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="#FFF">

        <link rel="manifest" href="../plain/manifest.json">

        <title>Project - Filmelier</title>


        <script>
            let devcaller = {};

            let keyboard; //키보드 핸들러 전용 핸들러

            let eventhandler;

            let transition;

            let movie_content_handler;

            //let file;

        </script>

        <script type="module">
            //import Hello from '../../typeout/hello.js';
            import MoviePanelHandler from '../../typeout/web/movie/MoviePanelHandler.js';

            /*
            릴리즈시 삭제 START
            */

            import Search from "../../typeout/web/search/Search.js";

            /*
            릴리즈시 삭제 END
            */


            import KeyboardHandler from '../../typeout/web/keyboard/KeyboardHandler.js';
            import FileHandler from '../../typeout/web/file/FileHandler.js';

            import EventHandler from "../../typeout/web/event/EventHandler.js";

            import TransitionHandler from "../../typeout/web/style/TransitionHandler.js";

            import MovieContentHandler from "../../typeout/web/movie/MovieContentHandler.js";

            keyboard = new KeyboardHandler(); //키보드 핸들러를 자바스크립트 keyboard에 assign
            eventhandler = new EventHandler();

            transition = new TransitionHandler();

            movie_content_handler = MovieContentHandler;
            
            //file = new FileHandler();

            let globalone;


            window.onload = ()=>{
                /*
                릴리즈시 삭제
                console.log("WORK!");
                let hel = new Hello();
                */

                if('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('../../typeout/web/service/ServiceWorker.js').then(function(registration) {
                        console.log('ServiceWorker 가 다음의 scope에 등록되었습니다.: ', registration.scope);
                    }, function(err) {
                        console.log('ServiceWorker 등록 실패: ', err);
                    });
                }

                

                devcaller["moviehandler"] = new MoviePanelHandler();
                devcaller["search"] = new Search(); //릴리즈시 삭제
                
                // for(let i = 0; i < 11; i++){
                //     devcaller["search"].submit(document.querySelector("#searchInput"));
                // }

                transition.applyTransition(); // 트랜지션 적용
                document.querySelector("html").style.display = "block";

                //document.querySelector("#searchInput").focus();
                
                //devcaller.moviehandler.createMoviePanel(100);
            }

        </script>
        <style>
            html, body{
                margin: 0px;
                overflow: hidden;
                
            }
        </style>
    </head>
    <body>



        <div id="wrapper" class="relative">
            <div id="wallpaper" class="float"></div>
            <div id="release" class="wrapper"></div>

            <div id="moviePanel" class="wrapper">

                <!--동적으로 생성되는 페이지로 변경할 것-->

                <nav>

                    <div id="logoPanel">
                        <div id="logo"></div>
                    </div>

                    <div id="imageSlot">
                        <div id="imageSlider">
                            
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/avatar.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/criminalcity.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/extremejobv.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/incenption.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/internationalmarket.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/lalaland.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/martian.webp">
                        <img class="imageSlider_imageSlot" name="king" src="../image/imageSlider/springonseoul.webp">
                        </div>
                    </div>
                    
                </nav>

                <article>
                    <div id="searchBar">
                        <div id="searchField" class="notfilled trans-WidthHeight waitTransition" onclick="this.classList.remove('notfilled'); this.classList.add('fullfilled');">
                            <input id="searchInput" class="trans-WidthHeight waitTransition" type="search" placeholder="최고의 영화를 찾아봅시다...">
                            <div id="searchLog"></div>
                        </div>
                    </div>
                    <div id="contentPanel">
                        <div id="controlPanel">
                            <div id="sendAnalysticsButton" class="invisible" onclick="movie_content_handler.getInstance.AnalyzeMovieData(this)">영화 추천 받기</div>
                        </div>
                        <div id="movieContents" class="movieContentClass"></div>
                        <div id="loading" class="invisible movieContentClass">
                            <span class="loader"></span>
                        </div>
                        <div id="ranking" class="showflex movieContentClass">
                            <div id="ranking_toprank" class="rankingPoster">
                            </div>
                            <div id="ranking_underrank" class="rankingPoster">
                            </div>
                        </div>
                    </div>
                </article>



            </div>

            <div id="navigationPanel" class="wrapper"></div>
                <div id="topNavigation">
                    <div class="navComponent trans-Nav waitTransition"><a class="officialLink" target="_blank" href="https://github.com/HumanMediProject/filmelier/blob/main/README.md">About Us</a></div>
                    <div class="navComponent trans-Nav waitTransition"><a class="officialLink" target="_blank" href="https://github.com/HumanMediProject/filmelier/issues/new">Report Issue</a> <img src="../image/svg/github-mark-white.svg"></div>
                </div>
            </div>

            <div id="movieWrapper" class="wrapper">
            </div>

            <div id="console" class="float invisible">
                <span>Console</span>
            </div>
        </div>
        
    </body>
    <footer>
        <footstyle>

            <link rel="stylesheet" href="../css/root-vars.css">
            <link rel="stylesheet" href="../css/font.css">


            <link rel="stylesheet" href="../css/console.css">
            <link rel="stylesheet" href="../css/visual/visualstyle.css">

            <link rel="stylesheet" href="../css/main.css">

            <link rel="stylesheet" href="../css/background.css">


            <link rel="stylesheet" href="../css/star/star.css">
            <link rel="stylesheet" href="../css/movie.css">
            <link rel="stylesheet" href="../css/test/testmain.css">

            <link rel="stylesheet" href="../css/widget/logo.css">
            <link rel="stylesheet" href="../css/widget/navigation.css">
            <link rel="stylesheet" href="../css/widget/search.css">
            <link rel="stylesheet" href="../css/widget/imageslot.css">
        </footstyle>
        <footscript>
            <!--script type="module" src="../../typeout/web/movie/MoviePanelHandler.js"></script-->
        </footscript>
    </footer>
</html>